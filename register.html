<!doctype html>
<html lang="sq">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://kit.fontawesome.com/fddc30fb79.js" crossorigin="anonymous"></script>
<title>Register</title>
<link rel="stylesheet" href="css/register.css">
</head>
<body>

    <header class="hero">
    <div class="container">
      <nav class="nav">
        <div class="brand" style="font-weight:700;letter-spacing:2px;color:whitesmoke;">
          <img src="images/Logo.png" alt="ECO-Hiking Logo" style="height:50px;vertical-align:middle;margin-right:8px">
          ECO-Hiking
        </div>
        <div class="links">
          <a href="index.html">Home</a>
          <a href="guides.html">Guides</a>
          <a href="blog.html">Blog</a>
          <a href="contact.html">Contact</a>
          <a href="advice.html">Advice</a>
          
        </div>
      </nav>
      </div>
      </header>

<div class="wrap">
    <div class="card">
        <div class="left">
            <div class="login-box">
                <h1>Create Account</h1>
                <p class="lead">Please fill in your details</p>
                <form id="registerForm">
                    <div>
                        <label for="firstname">First Name</label>
                        <input id="firstname" type="text" required>
                    </div>
                    <div>
                        <label for="lastname">Last Name</label>
                        <input id="lastname" type="text" required>
                    </div>
                    <div>
                        <label for="username">Username</label>
                        <input id="username" type="text" required>
                    </div>
                    <div>
                        <label for="password">Password</label>
                        <input id="password" type="password" required>
                    </div>
                    <div>
                        <label for="confirmpassword">Confirm Password</label>
                        <input id="confirmpassword" type="password" required>
                    </div>
                    <label class="checkbox">
                        <input type="checkbox" required>
                        <span>I agree to Terms & Conditions</span>
                    </label>


                    <button type="submit" class="btn">Create Account</button>
                    <p class="small">Already have an account? <a class="link" href="singin.html">Sign In</a></p>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
async function sha256(message) {
    const msgBuffer = new TextEncoder().encode(message);
    const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
}

document.getElementById("registerForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const firstname = document.getElementById("firstname").value;
    const lastname = document.getElementById("lastname").value;
    const username = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    const confirm = document.getElementById("confirmpassword").value;

    if (pass !== confirm) {
        alert("Passwords do not match!");
        return;
    }

    const hashedPassword = await sha256(pass);

    // ðŸ‘‰ RUJE USER-IN
    const user = {
        firstname: firstname,
        lastname: lastname,
        username: username,
        password: hashedPassword
    };

    localStorage.setItem("user", JSON.stringify(user));

    alert("Account created successfully!");

    // ðŸ‘‰ DÃ‹RGO TE SIGN IN
    window.location.href = "singin.html";
});
</script>
</body>
</html>
